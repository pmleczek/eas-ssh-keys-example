(()=>{var e={85:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const s=r(n(546));function spawnAsync(e,t,n={}){const r=new Error;const o=r.stack?r.stack.replace(/^.*/,"    ..."):null;let c;let i=new Promise(((r,i)=>{let{ignoreStdio:a,...u}=n;c=(0,s.default)(e,t,u);let l="";let f="";if(!a){if(c.stdout){c.stdout.on("data",(e=>{l+=e}))}if(c.stderr){c.stderr.on("data",(e=>{f+=e}))}}let completionListener=(n,s)=>{c.removeListener("error",errorListener);let a={pid:c.pid,output:[l,f],stdout:l,stderr:f,status:n,signal:s};if(n!==0){let r=t&&t.length>0?` ${t.join(" ")}`:"";let c=s?new Error(`${e}${r} exited with signal: ${s}`):new Error(`${e}${r} exited with non-zero code: ${n}`);if(c.stack&&o){c.stack+=`\n${o}`}Object.assign(c,a);i(c)}else{r(a)}};let errorListener=e=>{if(a){c.removeListener("exit",completionListener)}else{c.removeListener("close",completionListener)}Object.assign(e,{pid:c.pid,output:[l,f],stdout:l,stderr:f,status:null,signal:null});i(e)};if(a){c.once("exit",completionListener)}else{c.once("close",completionListener)}c.once("error",errorListener)}));i.child=c;return i}e.exports=spawnAsync},546:(e,t,n)=>{"use strict";const r=n(317);const s=n(877);const o=n(469);function spawn(e,t,n){const c=s(e,t,n);const i=r.spawn(c.command,c.args,c.options);o.hookChildProcess(i,c);return i}function spawnSync(e,t,n){const c=s(e,t,n);const i=r.spawnSync(c.command,c.args,c.options);i.error=i.error||o.verifyENOENTSync(i.status,c);return i}e.exports=spawn;e.exports.spawn=spawn;e.exports.sync=spawnSync;e.exports._parse=s;e.exports._enoent=o},469:e=>{"use strict";const t=process.platform==="win32";function notFoundError(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function hookChildProcess(e,n){if(!t){return}const r=e.emit;e.emit=function(t,s){if(t==="exit"){const t=verifyENOENT(s,n);if(t){return r.call(e,"error",t)}}return r.apply(e,arguments)}}function verifyENOENT(e,n){if(t&&e===1&&!n.file){return notFoundError(n.original,"spawn")}return null}function verifyENOENTSync(e,n){if(t&&e===1&&!n.file){return notFoundError(n.original,"spawnSync")}return null}e.exports={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError}},877:(e,t,n)=>{"use strict";const r=n(928);const s=n(866);const o=n(164);const c=n(599);const i=process.platform==="win32";const a=/\.(?:com|exe)$/i;const u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function detectShebang(e){e.file=s(e);const t=e.file&&c(e.file);if(t){e.args.unshift(e.file);e.command=t;return s(e)}return e.file}function parseNonShell(e){if(!i){return e}const t=detectShebang(e);const n=!a.test(t);if(e.options.forceShell||n){const n=u.test(t);e.command=r.normalize(e.command);e.command=o.command(e.command);e.args=e.args.map((e=>o.argument(e,n)));const s=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${s}"`];e.command=process.env.comspec||"cmd.exe";e.options.windowsVerbatimArguments=true}return e}function parse(e,t,n){if(t&&!Array.isArray(t)){n=t;t=null}t=t?t.slice(0):[];n=Object.assign({},n);const r={command:e,args:t,options:n,file:undefined,original:{command:e,args:t}};return n.shell?r:parseNonShell(r)}e.exports=parse},164:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(e){e=e.replace(t,"^$1");return e}function escapeArgument(e,n){e=`${e}`;e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"');e=e.replace(/(?=(\\+?)?)\1$/,"$1$1");e=`"${e}"`;e=e.replace(t,"^$1");if(n){e=e.replace(t,"^$1")}return e}e.exports.command=escapeCommand;e.exports.argument=escapeArgument},599:(e,t,n)=>{"use strict";const r=n(896);const s=n(152);function readShebang(e){const t=150;const n=Buffer.alloc(t);let o;try{o=r.openSync(e,"r");r.readSync(o,n,0,t,0);r.closeSync(o)}catch(e){}return s(n.toString())}e.exports=readShebang},866:(e,t,n)=>{"use strict";const r=n(928);const s=n(848);const o=n(689);function resolveCommandAttempt(e,t){const n=e.options.env||process.env;const c=process.cwd();const i=e.options.cwd!=null;const a=i&&process.chdir!==undefined&&!process.chdir.disabled;if(a){try{process.chdir(e.options.cwd)}catch(e){}}let u;try{u=s.sync(e.command,{path:n[o({env:n})],pathExt:t?r.delimiter:undefined})}catch(e){}finally{if(a){process.chdir(c)}}if(u){u=r.resolve(i?e.options.cwd:"",u)}return u}function resolveCommand(e){return resolveCommandAttempt(e)||resolveCommandAttempt(e,true)}e.exports=resolveCommand},940:(e,t,n)=>{var r=n(896);var s;if(process.platform==="win32"||global.TESTING_WINDOWS){s=n(225)}else{s=n(25)}e.exports=isexe;isexe.sync=sync;function isexe(e,t,n){if(typeof t==="function"){n=t;t={}}if(!n){if(typeof Promise!=="function"){throw new TypeError("callback not provided")}return new Promise((function(n,r){isexe(e,t||{},(function(e,t){if(e){r(e)}else{n(t)}}))}))}s(e,t||{},(function(e,r){if(e){if(e.code==="EACCES"||t&&t.ignoreErrors){e=null;r=false}}n(e,r)}))}function sync(e,t){try{return s.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES"){return false}else{throw e}}}},25:(e,t,n)=>{e.exports=isexe;isexe.sync=sync;var r=n(896);function isexe(e,t,n){r.stat(e,(function(e,r){n(e,e?false:checkStat(r,t))}))}function sync(e,t){return checkStat(r.statSync(e),t)}function checkStat(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var n=e.mode;var r=e.uid;var s=e.gid;var o=t.uid!==undefined?t.uid:process.getuid&&process.getuid();var c=t.gid!==undefined?t.gid:process.getgid&&process.getgid();var i=parseInt("100",8);var a=parseInt("010",8);var u=parseInt("001",8);var l=i|a;var f=n&u||n&a&&s===c||n&i&&r===o||n&l&&o===0;return f}},225:(e,t,n)=>{e.exports=isexe;isexe.sync=sync;var r=n(896);function checkPathExt(e,t){var n=t.pathExt!==undefined?t.pathExt:process.env.PATHEXT;if(!n){return true}n=n.split(";");if(n.indexOf("")!==-1){return true}for(var r=0;r<n.length;r++){var s=n[r].toLowerCase();if(s&&e.substr(-s.length).toLowerCase()===s){return true}}return false}function checkStat(e,t,n){if(!e.isSymbolicLink()&&!e.isFile()){return false}return checkPathExt(t,n)}function isexe(e,t,n){r.stat(e,(function(r,s){n(r,r?false:checkStat(s,e,t))}))}function sync(e,t){return checkStat(r.statSync(e),e,t)}},689:e=>{"use strict";const pathKey=(e={})=>{const t=e.env||process.env;const n=e.platform||process.platform;if(n!=="win32"){return"PATH"}return Object.keys(t).reverse().find((e=>e.toUpperCase()==="PATH"))||"Path"};e.exports=pathKey;e.exports["default"]=pathKey},152:(e,t,n)=>{"use strict";const r=n(334);e.exports=(e="")=>{const t=e.match(r);if(!t){return null}const[n,s]=t[0].replace(/#! ?/,"").split(" ");const o=n.split("/").pop();if(o==="env"){return s}return s?`${o} ${s}`:o}},334:e=>{"use strict";e.exports=/^#!(.*)/},848:(e,t,n)=>{const r=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";const s=n(928);const o=r?";":":";const c=n(940);const getNotFoundError=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"});const getPathInfo=(e,t)=>{const n=t.colon||o;const s=e.match(/\//)||r&&e.match(/\\/)?[""]:[...r?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)];const c=r?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"";const i=r?c.split(n):[""];if(r){if(e.indexOf(".")!==-1&&i[0]!=="")i.unshift("")}return{pathEnv:s,pathExt:i,pathExtExe:c}};const which=(e,t,n)=>{if(typeof t==="function"){n=t;t={}}if(!t)t={};const{pathEnv:r,pathExt:o,pathExtExe:i}=getPathInfo(e,t);const a=[];const step=n=>new Promise(((o,c)=>{if(n===r.length)return t.all&&a.length?o(a):c(getNotFoundError(e));const i=r[n];const u=/^".*"$/.test(i)?i.slice(1,-1):i;const l=s.join(u,e);const f=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;o(subStep(f,n,0))}));const subStep=(e,n,r)=>new Promise(((s,u)=>{if(r===o.length)return s(step(n+1));const l=o[r];c(e+l,{pathExt:i},((o,c)=>{if(!o&&c){if(t.all)a.push(e+l);else return s(e+l)}return s(subStep(e,n,r+1))}))}));return n?step(0).then((e=>n(null,e)),n):step(0)};const whichSync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:r,pathExtExe:o}=getPathInfo(e,t);const i=[];for(let a=0;a<n.length;a++){const u=n[a];const l=/^".*"$/.test(u)?u.slice(1,-1):u;const f=s.join(l,e);const p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let e=0;e<r.length;e++){const n=p+r[e];try{const e=c.sync(n,{pathExt:o});if(e){if(t.all)i.push(n);else return n}}catch(e){}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw getNotFoundError(e)};e.exports=which;which.sync=whichSync},407:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(85));const o=n(455);const c=n(161);async function runCommand(e,t,n){const r=await(0,s.default)(e,t,n);if(r.status!==0){throw new Error(r.stderr)}return r}async function setupGithubAccess(e){if("EAS_BUILD_RUNNER"in e.global.env&&e.global.env["EAS_BUILD_RUNNER"]==="local-build-plugin"){e.logger.info("The build is being ran locally");e.logger.info("Skipping the GitHub SSH key setup");return}const t=(0,c.homedir)();await(0,o.mkdir)(t+"/.ssh",{recursive:true});if(!("GITHUB_SSH_KEY"in e.global.env)){e.logger.error("Variable GITHUB_SSH_KEY not found in the environment");throw new Error("Could not find GITHUB_SSH_KEY in the environment")}const n=e.global.env["GITHUB_SSH_KEY"]??"";const r=Buffer.from(n,"base64");process.umask(127);await(0,o.writeFile)(t+"/.ssh/id_rsa",r.toString("utf8"));const{stdout:s}=await runCommand("ssh-keygen",["-y","-f",t+"/.ssh/id_rsa"]);process.umask(18);await(0,o.writeFile)(t+"/.ssh/id_rsa.pub",s);const{stdout:i}=await runCommand("ssh-keyscan",["github.com"]);await(0,o.appendFile)(t+"/.ssh/known_hosts",i);await runCommand("git",["config","--global","user.name","<Your first name>","<Your last name>"]);await runCommand("git",["config","--global","user.email","<Your email>"])}t["default"]=setupGithubAccess},317:e=>{"use strict";e.exports=require("child_process")},896:e=>{"use strict";e.exports=require("fs")},455:e=>{"use strict";e.exports=require("node:fs/promises")},161:e=>{"use strict";e.exports=require("node:os")},928:e=>{"use strict";e.exports=require("path")}};var t={};function __nccwpck_require__(n){var r=t[n];if(r!==undefined){return r.exports}var s=t[n]={exports:{}};var o=true;try{e[n].call(s.exports,s,s.exports,__nccwpck_require__);o=false}finally{if(o)delete t[n]}return s.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var n=__nccwpck_require__(407);module.exports=n})();